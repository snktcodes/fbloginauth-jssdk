<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v12.0&appId=432447394970320&autoLogAppEvents=1" nonce="U1ky2Znc"></script>

<!-- <div class="fb-login-button" data-width="" data-size="large" data-button-type="continue_with" data-layout="default" data-auto-logout-link="false" data-use-continue-as="false"></div>
 -->
<button

onclick="postScore();"
>POST SCORE
</body>

<script>
function postScore() {
          FB.login(function (response) {
            if (response.authResponse) {
              window.FB.api(
                '/me',
                { fields: 'email,last_name,picture,first_name' },
                function (response) {
                  if (response.id) {
                    postData(
                      'https://8btazx6thc.execute-api.ap-south-1.amazonaws.com/postscore',
                      {
                        id: response.id,
                        firstname: response.first_name,
                        lastname: response.last_name,
                        score: currentScore,
                        profilePic: response.picture.data.url,
                        email: response.email,
                      }
                    )
                      .then((data) => {
                        
                      })
                      .catch((error) => {
                        console.log(error)
                      })
                  }

                  

                  alert('Your Score Was Posted.')
                  

                  document.getElementById('fbLogin').style.display = 'none'

                  renderUI().then()
                }
              )
            } else {
              alert('Please Login To Post Your Score')
              
            }
          })
        }

        async function postData(url = '', data = {}) {
    // Default options are marked with *
    const response = await fetch(url, {
        method: 'POST',
        mode: 'no-cors',
        cache: 'no-cache',
        headers: {
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin': '*',
        },
        body: JSON.stringify(data) // body data type must match "Content-Type" header
    });
    return response; // parses JSON response into native JavaScript objects
}
</script>
</html>
